{"version":3,"file":"mini-gl.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACO;AACA;AACA;AACP;AACA;AACA;AACA,WAAW,4CAA4C;AACvD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","sources":["webpack://MiniGL/webpack/universalModuleDefinition","webpack://MiniGL/./node_modules/gl-matrix/esm/common.js","webpack://MiniGL/./node_modules/gl-matrix/esm/mat3.js","webpack://MiniGL/./src/Base.ts","webpack://MiniGL/./src/Mesh/BaseMesh.ts","webpack://MiniGL/./src/Mesh/Line.ts","webpack://MiniGL/./src/Mesh/Mesh.ts","webpack://MiniGL/./src/Mesh/Point.ts","webpack://MiniGL/./src/Mesh/WidthLine.ts","webpack://MiniGL/./src/Shaders/line.ts","webpack://MiniGL/./src/Shaders/mesh.ts","webpack://MiniGL/./src/Shaders/point.ts","webpack://MiniGL/./src/Shaders/widthLine.ts","webpack://MiniGL/./src/Utils/Controller.ts","webpack://MiniGL/./src/View/Canvas.ts","webpack://MiniGL/./src/View/Viewport.ts","webpack://MiniGL/./node_modules/tslib/tslib.es6.js","webpack://MiniGL/webpack/bootstrap","webpack://MiniGL/webpack/runtime/define property getters","webpack://MiniGL/webpack/runtime/hasOwnProperty shorthand","webpack://MiniGL/webpack/runtime/make namespace object","webpack://MiniGL/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MiniGL\"] = factory();\n\telse\n\t\troot[\"MiniGL\"] = factory();\n})(self, () => {\nreturn ","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import MiniGL from \".\";\n\n/**\n * 图层基础类\n * @class\n */\nclass Base {\n    miniGL:MiniGL\n    _listeners = {}\n\n    /**\n     * 事件监听,用法同jQuery.on\n     */\n    on(type:string, listener:Function) {\n        const listeners = this._listeners;\n        if (listeners[type] === undefined) {\n            listeners[type] = [];\n        }\n        if (listeners[type].indexOf(listener) === -1) {\n            listeners[type].push(listener);\n        }\n    }\n\n    /**\n     * 触发事件\n     * @example\n     * this.fire(\"change\",event)\n     */\n    fire(type:string, event) {\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            var array = listenerArray.slice(0);\n            for (var i = 0, l = array.length; i < l; i++) {\n                array[i].call(this, event);\n            }\n        }\n    }\n\n    /**\n     * 关闭事件\n     * @example\n     * this.off('change',onChange)\n     */\n    off(type:string, listener) {\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            if (listener) {\n                var index = listenerArray.indexOf(listener);\n                if (index !== -1) {\n                    listenerArray.splice(index, 1);\n                }\n            } else {\n                this._listeners[type] = [];\n            }\n        }\n    }\n\n    initConfig(config) {\n\n    }\n\n    /**\n     * 地图添加图层时调用,由子类实现\n     */\n    onAdd(map:MiniGL) {\n        this.miniGL = map;\n    }\n\n    /**\n     * 地图每帧调用该函数\n     */\n    update() {\n\n    }\n\n    /**\n     * 移除图层时调用\n     */\n    onRemove() {\n        this._listeners = {};\n    }\n\n}\nexport default Base;\n","import Group from \"../Group/Group\";\nimport Texture from \"../Texture/Texture\";\nimport { mat3 } from \"gl-matrix\";\nimport MiniGL from \"..\";\nexport interface BaseMeshConfig {\n    [key: string]: any;\n}\n/**\n * Base 基类方便继承以实现其他类型的情况\n */\nclass BaseMesh {\n    config: BaseMeshConfig;\n    vSize = 2;\n    offset = 0;\n    depthMask = true;\n    depthTest = true;\n    transparent = true;\n    uniformsNeedUpdate = true;\n    uniformLocations = {};\n    visible = true; // 是否需要重绘\n    uniformData: Record<\n        string,\n        {\n            value: number | number[] | Float32Array;\n            type: string;\n            texture?: WebGLTexture;\n        }\n    > = {\n        z: {\n            value: 1,\n            type: \"uniform1f\",\n        },\n    };\n    vertex = [];\n    buffers: Record<string, WebGLBuffer> = {};\n    buffersSize: Record<string, number> = {};\n    indices: number[] = [];\n    matrix: mat3;\n    shaders: {\n        vertex: string;\n        fragment: string;\n    };\n    texture: WebGLTexture;\n    gl: WebGL2RenderingContext;\n    bufferType: string;\n    count: number;\n    indicesPointer: WebGLBuffer;\n    shaderProgram: WebGLProgram;\n    drawType: string;\n    miniGL: MiniGL;\n    parent: Group;\n    zOrder: number;\n    childId: number;\n\n    constructor() {}\n    init(config: BaseMeshConfig = {}) {\n        this.config = Object.assign(\n            {\n                type: \"ok\",\n            },\n            config\n        );\n\n        // 初始化模型转换矩阵，这个矩阵按需引用\n        this.matrix = mat3.create();\n\n        if (config.shaders) {\n            this.shaders = { ...this.shaders, ...config.shaders };\n        }\n\n        if (config.miniGL) {\n            config.miniGL.canvas.add(this);\n        }\n    }\n\n    setMatrix(matrix) {\n        mat3.copy(this.matrix, matrix);\n    }\n\n    setUniformData() {\n        if (!this.uniformData || !this.uniformsNeedUpdate) return;\n        for (let key in this.uniformData) {\n            const item = this.uniformData[key];\n            this.setUniform(key, item);\n        }\n        // this.uniformsNeedUpdate = false;\n    }\n    /**\n     * @param  {} texture\n     * @param  {} key='u_Sampler'\n     */\n    setTexture(texture: Texture | WebGLTexture, key = \"u_Sampler\") {\n        this.uniformData[key] = {\n            type: \"uniform1i\", // image\n            value: 0, // 0号纹理传递\n            texture: (<Texture>texture).webglTexture\n                ? (<Texture>texture).webglTexture\n                : texture,\n        };\n        this.texture = texture;\n        this.uniformsNeedUpdate = true;\n    }\n\n    setUniform(key, item) {\n        const { gl } = this;\n        const { value, type, texture, textureUnit = 0 } = item;\n        // 矩阵\n        if (type.indexOf(\"uniformMatrix\") > -1) {\n            gl[type](this.getUniformLocation(key), false, value);\n\n            // 图形数据\n        } else if (texture) {\n            // 激活纹理单元0，这里可以配置激活多个纹理单元，用来完成一个shader里多个纹理叠加处理的后期效果\n            gl.activeTexture(gl[`TEXTURE${textureUnit}`]);\n            // 绑定纹理到单元0上\n            gl.bindTexture(gl.TEXTURE_2D, item.texture);\n            // 传值\n            gl[type](this.getUniformLocation(key), value);\n\n            // 行列数据\n        } else if (type.slice(-1) === \"v\" || typeof value !== \"object\") {\n            gl[type](this.getUniformLocation(key), value);\n        } else {\n            gl[type](\n                this.getUniformLocation(key),\n                value[0] || value,\n                value[1],\n                value[2],\n                value[3]\n            );\n        }\n        this.uniformData[key] = item;\n    }\n\n    /**\n     * 新的缓存数据\n     * @param  {} data\n     * @param  {} name\n     */\n    setBufferData(\n        data: number[],\n        name: string,\n        size: number,\n        bufferType = this.bufferType\n    ) {\n        // 没有的话初始化复用一个\n        if (!this.buffers[name]) {\n            this.buffers[name] = this.gl.createBuffer();\n        }\n        this.buffersSize[name] = size;\n\n        // 顶点buffer\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffers[name]);\n        this.gl.bufferData(\n            this.gl.ARRAY_BUFFER,\n            new Float32Array(data),\n            this.gl[bufferType || \"STATIC_DRAW\"]\n        );\n    }\n\n    /**\n     * 更新缓冲区数据\n     * @param {Array} data\n     * @param {string} name\n     * @param {number} offset\n     */\n    updateBufferData(data: number[], name: string, offset = 0) {\n        // 顶点buffer\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffers[name]);\n        this.gl.bufferSubData(\n            this.gl.ARRAY_BUFFER,\n            offset,\n            new Float32Array(data)\n        );\n    }\n\n    setIndices(indices: number[]) {\n        this.indices = indices;\n        this.count = !this.count ? indices.length : this.count;\n        // 顶点buffer\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indicesPointer);\n        this.gl.bufferData(\n            this.gl.ELEMENT_ARRAY_BUFFER,\n            new Uint16Array(indices),\n            this.gl.STATIC_DRAW\n        );\n    }\n\n    // 生成shader程序\n    initShader() {\n        const { gl } = this;\n\n        // 加载shader\n        const vertexShaderObject = this.loadShader(\n            this.shaders.vertex,\n            this.gl.VERTEX_SHADER\n        );\n        const fragmentShaderObject = this.loadShader(\n            this.shaders.fragment,\n            this.gl.FRAGMENT_SHADER\n        );\n\n        // 创建程序\n        const shaderProgram = this.gl.createProgram();\n        this.gl.attachShader(shaderProgram, vertexShaderObject);\n        this.gl.attachShader(shaderProgram, fragmentShaderObject);\n        this.gl.linkProgram(shaderProgram);\n\n        if (!this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS)) {\n            console.error(\n                \"shaderProgram Error: \",\n                gl.getError(),\n                gl.getProgramParameter(shaderProgram, 35715),\n                gl.getProgramInfoLog(shaderProgram).trim()\n            );\n            console.error(\n                \"fragmentLog:\",\n                gl.getShaderInfoLog(vertexShaderObject).trim(),\n                this.addLineNumbers(gl.getShaderSource(vertexShaderObject))\n            );\n            console.error(\n                \"vertexLog:\",\n                gl.getShaderInfoLog(fragmentShaderObject).trim(),\n                this.addLineNumbers(gl.getShaderSource(fragmentShaderObject))\n            );\n            return;\n        }\n\n        this.shaderProgram = shaderProgram;\n    }\n\n    addLineNumbers(string) {\n        var lines = string.split(\"\\n\");\n\n        for (var i = 0; i < lines.length; i++) {\n            lines[i] = i + 1 + \": \" + lines[i];\n        }\n        return lines.join(\"\\n\");\n    }\n\n    // 获取顶点变量地址\n    getAttribLocation(name) {\n        return this.gl.getAttribLocation(this.shaderProgram, name);\n    }\n\n    // 获取uniform变量地址\n    getUniformLocation(name) {\n        // 缓存会每秒快20ms左右，节省一帧的时机\n        if (this.uniformLocations[name]) return this.uniformLocations[name];\n        this.uniformLocations[name] = this.gl.getUniformLocation(\n            this.shaderProgram,\n            name\n        );\n        return this.uniformLocations[name];\n    }\n\n    // 加载shader\n    loadShader(shaderStr, type) {\n        let shader = this.gl.createShader(type);\n        this.gl.shaderSource(shader, shaderStr);\n        this.gl.compileShader(shader);\n        return shader;\n    }\n\n    render() {\n        if (!this.shaders) return;\n        // 2D 只需要两个坐标轴标识位置\n        const vLen = Math.ceil(this.vertex.length / this.vSize); // 几个点\n        const offset = 0; // 从数据第几位开始偏移\n        const normalize = false;\n\n        for (let key in this.buffers) {\n            const bufferData = this.buffers[key];\n            const bufferPosition = this.getAttribLocation(key);\n            // 分别绑定数据到shader程序中\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData);\n            this.gl.vertexAttribPointer(\n                bufferPosition,\n                this.buffersSize[key],\n                this.gl.FLOAT,\n                normalize,\n                0,\n                offset\n            );\n            this.gl.enableVertexAttribArray(bufferPosition);\n        }\n\n        // 加载shader程序\n        this.gl.useProgram(this.shaderProgram);\n\n        this.setUniformData();\n\n        // 渲染\n        if (this.vertex.length) {\n            this.gl.drawArrays(this.gl[this.drawType], this.offset, vLen);\n        }\n    }\n\n    afterRender() {}\n\n    onAdd(miniGL) {\n        this.miniGL = miniGL;\n        // 获取顶点数据内存里的指针\n        this.gl = miniGL.gl;\n        // 没有初始化的情况\n        if (!this.indicesPointer) {\n            this.indicesPointer = this.gl.createBuffer();\n        }\n        if (this.shaders && !this.shaderProgram) {\n            this.initShader();\n        }\n        this.afterAdd();\n    }\n\n    afterAdd() {}\n\n    translate(x, y) {\n        mat3.translate(this.matrix, this.matrix, [x, y]);\n    }\n    scale(x, y) {\n        y = y || x;\n        mat3.scale(this.matrix, this.matrix, [x, y]);\n    }\n\n    // 销毁shader\n    destroy() {\n        const shaders = this.gl.getAttachedShaders(this.shaderProgram);\n        shaders.forEach((item) => {\n            this.gl.deleteShader(item);\n        });\n        this.gl.deleteBuffer(this.indicesPointer);\n        this.gl.deleteProgram(this.shaderProgram);\n        this.parent = undefined;\n        this.dispose();\n    }\n\n    // 释放buffer空间\n    dispose() {\n        for (let key in this.buffers) {\n            this.gl.disableVertexAttribArray(this.getAttribLocation(key));\n            this.gl.deleteBuffer(this.buffers[key]);\n        }\n        for (let key in this.uniformData) {\n            if (this.uniformData[key].texture) {\n                this.gl.deleteTexture(this.uniformData[key].texture);\n            }\n        }\n        this.buffers = {};\n    }\n}\n\nexport default BaseMesh;\n","import lineShader from '../Shaders/line';\nimport Base from './BaseMesh';\nimport { PointData } from './Mesh';\n\nclass Line extends Base {\n\tdrawType = 'LINE_STRIP';\n\tshaders = {\n\t\tvertex: lineShader.vertexShader,\n\t\tfragment: lineShader.fragmentShader\n\t}\n\toffset = 0;\n\tdata: PointData[];\n\n\tconstructor(config) {\n\t\tsuper();\n\t\tconfig = Object.assign({\n\t\t\tz: 1\n\t\t}, config);\n\t\tthis.uniformData = {\n\t\t\tz: {\n\t\t\t\tvalue: Math.min(config.z, 1),\n\t\t\t\ttype: 'uniform1f'\n\t\t\t}\n\t\t};\n\t\tthis.init(config);\n\t}\n\n\tsetData(data:PointData[]) {\n\t\tthis.dispose();\n\t\tconst points = [];\n\t\tthis.data = data;\n\t\tconst colors = [];\n\t\tdata.forEach(item => {\n\t\t\tpoints.push(item.position.x, item.position.y);\n\t\t\tcolors.push(...(item.color || this.config.color || [1, 0, 1, 1]));\n\t\t});\n\t\tthis.vertex = points;\n\t\tthis.setBufferData(points, 'position', 2);\n\t\tthis.setBufferData(colors, 'color', 4);\n\t}\n\n\t/**\n\t * \n\t * @param {any} param 入参\n\t */\n\tsetBufferDatas({\n\t\tposition, color\n\t}: { position: number[], color: number[] }) {\n\t\tthis.dispose();\n\t\tthis.vertex = position;\n\t\tposition && this.setBufferData(position, 'position', 2);\n\n\t\tcolor && this.setBufferData(color, 'color', 4);\n\n\t}\n\n}\nexport default Line;\n","import meshShader from '../Shaders/mesh';\nimport Base, { BaseMeshConfig } from './BaseMesh';\nexport interface PointData{\n    position: {\n        x: number,\n        y: number,\n    },\n    size?: number,\n    color?: [number, number, number, number],\n    [key: string]: any,\n}\nclass Mesh extends Base {\n    drawType = 'TRIANGLES';\n    data:PointData[]\n    offset = 0;// array.BYTES_PER_ELEMENT * indicesEachLength\n\n    constructor(config: BaseMeshConfig = {\n        wireFrame: false\n    }) {\n        super();\n        this.shaders = {\n            vertex: meshShader.vertexShader,\n            fragment: meshShader.fragmentShader\n        };\n        this.uniformData.z = {\n            value: config.z || 1,\n            type: 'uniform1f'\n        };\n        this.init(config);\n        this.vSize = 2;\n\n    }\n\n    setData(data:PointData[], indices:number[]) {\n        this.dispose();\n        const points = [];\n        const colors = [];\n        this.data = data;\n        data.forEach(item => {\n            const coord = [item.position.x, item.position.y];\n            const color = item.color || [1, 1, 0, 1];\n            colors.push(...color);\n            points.push(...coord);\n        });\n        this.vertex = points;\n        this.setBufferData(points, 'position', 2);\n        this.setBufferData(colors, 'color', 4);\n        this.setIndices(indices);\n    }\n\n    setBufferDatas({\n        position, color, indices, uvs\n    }: {\n        position:number[],color:number[],indices:number[],uvs:number[]\n    }) {\n        const {\n            miniGL: { viewport }\n        } = this;\n        this.dispose();\n\n        this.vertex = position;\n        this.setBufferData(position, 'position', 2);\n        this.setBufferData(color, 'color', 4);\n        this.setBufferData(uvs, 'uv', 2);\n        this.setIndices(indices);\n    }\n\n    setIndices(input:number[]) {\n        let indices = [];\n        // 支持显示网格线\n        if (this.config.wireFrame && this.drawType === 'TRIANGLES') {\n            for (let i = 0; i < input.length - 2; i += 3) {\n                indices.push(input[i], input[i + 1], input[i + 1], input[i + 2], input[i + 2], input[i]);\n            }\n        } else {\n            indices = input;\n        }\n        this.indices = indices;\n        // 顶点buffer\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indicesPointer);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), this.gl.STATIC_DRAW);\n    }\n\n    render() {\n        // 2D 只需要两个坐标轴标识位置\n        const offset = 0;// 从数据第几位开始偏移\n        const normalize = false;\n\n        // 分别绑定数据到shader程序中\n        for (let key in this.buffers) {\n            const bufferData = this.buffers[key];\n            const bufferPosition = this.getAttribLocation(key);\n            // 分别绑定数据到shader程序中\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData);\n            this.gl.vertexAttribPointer(bufferPosition, this.buffersSize[key], this.gl.FLOAT, normalize, 0, offset);\n            this.gl.enableVertexAttribArray(bufferPosition);\n        }\n\n        // 使用顶点数据\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indicesPointer);\n\n        // 加载shader程序\n        this.gl.useProgram(this.shaderProgram);\n\n        this.setUniformData();\n\n        // 渲染\n        if (this.indices.length) {\n            const drawType = this.config.wireFrame ? 'LINES' : this.gl[this.drawType];\n            // offset必须乘以类型数组的长度，意味着要从内存中数据的对应字节数开始算 根据类型乘对应的BYTES_PER_ELEMENT\n            this.gl.drawElements(drawType, this.indices.length, this.gl.UNSIGNED_SHORT, this.offset);\n        }\n    }\n}\nexport default Mesh;\n","import pointShader from '../Shaders/point';\nimport Base, { BaseMeshConfig } from './BaseMesh';\nimport { PointData } from './Mesh';\n\nclass Point extends Base {\n    drawType = 'POINTS';\n    vertex = [];\n    offset = 0;\n    vSize = 2;\n    bufferType = 'DYNAMIC_DRAW';\n    constructor(config: BaseMeshConfig) {\n        super();\n        config = Object.assign({\n            isRound: true,\n            initTime: false,\n            sizeAttenuation: true,\n        }, config);\n        this.shaders = {\n            vertex: config.vertexShader || pointShader.vertexShader(config),\n            fragment: config.fragmentShader || pointShader.fragmentShader(config)\n        };\n        this.uniformData = {\n            z: {\n                value: 1,\n                type: 'uniform1f'\n            },\n            t: {\n                value: 1,\n                type: 'uniform1f'\n            },\n            antialias: {\n                value: 0.1,\n                type: 'uniform1f'\n            }\n        };\n        this.init(config);\n    }\n\n    setData(data:PointData[]) {\n\n        this.dispose();\n\n        const points = [];\n        const colors = [];\n        const size = [];\n        const vTime = [];\n        data.forEach(item => {\n            points.push(item.position.x, item.position.y);\n            colors.push(...(item.color || [1, 0, 0, 1]));\n            size.push(item.size || 10);\n            vTime.push(item.initTime || this.config.initTime || 2 * Math.random() * Math.PI);\n        });\n\n        this.vertex = points;\n        this.setBufferData(points, 'position', 2);\n        this.setBufferData(colors, 'color', 4);\n        this.setBufferData(size, 'size', 1);\n        this.setBufferData(vTime, 'initTime', 1);\n    }\n\n    /**\n     * \n     * @param {any} param 入参\n     */\n    setBufferDatas({\n        position, color, size, initTime\n    }: {\n        position:number[],color:number[],size:number[],initTime:number[]\n    }) {\n        const {\n            miniGL: { viewport }\n        } = this;\n        this.dispose();\n        this.uniformData.transform = {\n            value: viewport.transform,\n            type: 'uniformMatrix3fv'\n        };\n        this.vertex = position;\n        position && this.setBufferData(position, 'position', 2);\n\n        color && this.setBufferData(color, 'color', 4);\n        size && this.setBufferData(size, 'size', 1);\n        if (initTime) {\n            this.setBufferData(initTime, 'initTime', 1);\n        }\n    }\n\n}\nexport default Point;\n","import shader from '../Shaders/widthLine';\nimport Base, { BaseMeshConfig } from './BaseMesh';\nimport { PointData } from './Mesh';\nclass WidthLine extends Base {\n\tdrawType = 'TRIANGLES'// \"TRIANGLE_STRIP\";\n\tshaders = {\n\t\tvertex: shader.vertexShader,\n\t\tfragment: shader.fragmentShader\n\t}\n\toffset = 0;\n\tdata: PointData[] = [];\n\tres: { nowData: number[]; preData: number[]; side: number[]; nextData: number[]; };\n\n\tconstructor(config: BaseMeshConfig) {\n\t\tsuper();\n\t\tconfig = Object.assign({\n\t\t\twidth: 20,\n\t\t\tz: 1,\n\t\t\toffset: 0\n\t\t}, config);\n\t\tthis.uniformData = {\n\t\t\tz: {\n\t\t\t\tvalue: config.z || 1,\n\t\t\t\ttype: 'uniform1f'\n\t\t\t}\n\t\t};\n\t\tthis.init(config);\n\t}\n\n\tsetData(data:PointData[]):void {\n\t\tif (!data.length && data.length < 2) return console.warn('need input data.length >= 2');\n\n\t\t\n\t\tthis.uniformData.color = {\n\t\t\tvalue: this.config.color || [1, 0, 1, 1],\n\t\t\ttype: 'uniform4fv'\n\t\t};\n\t\tthis.uniformData.width = {\n\t\t\tvalue: 2 * this.config.width / this.miniGL.viewport.height,\n\t\t\ttype: 'uniform1f'\n\t\t};\n\t\tthis.uniformData.offset = {\n\t\t\tvalue: 2 * this.config.offset / this.miniGL.viewport.height,\n\t\t\ttype: 'uniform1f'\n\t\t};\n\t\tthis.data = data;\n\n\t\tconst points = [];\n\t\tdata.forEach(item=>{\n\t\t\tpoints.push(item.position.x, item.position.y);\n\t\t});\n\n\t\t// 生产双倍点for两个边\n\t\tconst res = this.calcSidePoints(points);\n\n\t\tthis.setBufferData(res.nowData, 'now', 2);\n\t\tthis.setBufferData(res.preData, 'pre', 2);\n\t\tthis.setBufferData(res.nextData, 'next', 2);\n\t\tthis.setBufferData(res.side, 'side', 1);\n\n\t\t// 生成顶点\n\t\tconst indices = [];\n\t\tconst indicesLength = res.nowData.length / 2;\n\t\t// TRIANGLES情况\n\t\tfor (let i = 0; i < indicesLength - 2; i += 2) {\n\t\t\tindices.push(i);\n\t\t\tindices.push(i + 1);\n\t\t\tindices.push(i + 2);\n\t\t\tindices.push(i + 2);\n\t\t\tindices.push(i + 1);\n\t\t\tindices.push(i + 3);\n\t\t}\n\t\t// Strip退化方案太反人类，不hack 了\n\t\t// for (let i = 0; i < indicesLength; i++) {\n\t\t// \t//012 213 233 336 366 667 678\n\t\t// \t// 4 =>3 5=>6 //退化过程\n\t\t// \t// data[length - 1],\n\t\t// \tindices.push(i);\n\t\t// }\n\t\tthis.setIndices(indices);\n\t\tthis.res = res;\n    }\n\n    addData(data) {\n\n    }\n\n\tcalcSidePoints(data:number[] = []):{nowData:number[],preData:number[],nextData:number[],side:number[]}{\n\t\tconst length = data.length;\n\t\tlet side = [];\n\t\tlet nextData = [];\n\t\tlet preData = [];\n\t\tlet nowData = [];\n\t\t// 生产双倍点for两个边\n\t\tfor (let i = 0; i < length; i += 2) {\n\t\t\tside.push(1, -1);\n\t\t\tnowData.push(data[i], data[i + 1], data[i], data[i + 1]);\n\t\t}\n\t\tconst next = [2 * data[length - 2] - data[length - 4], 2 * data[length - 1] - data[length - 3]];\n\t\tnextData = [\n\t\t\t...nowData,\n\t\t\t...next, ...next\n\t\t];\n\t\tnextData.splice(0, 4);\n\t\tconst pre = [2 * data[0] - data[2], 2 * data[1] - data[3]];\n\t\tpreData = [\n\t\t\t...pre,\n\t\t\t...pre,\n\t\t\t...nowData];\n\t\treturn {\n\t\t\tnowData,\n\t\t\tpreData,\n\t\t\tside,\n\t\t\tnextData\n\t\t};\n\t}\n\n\trender() {\n\t\t// 2D 只需要两个坐标轴标识位置\n\t\tconst offset = 0;// 从数据第几位开始偏移\n\t\tconst normalize = false;\n\n\t\tfor (let key in this.buffers) {\n\t\t\tconst bufferData = this.buffers[key];\n\t\t\tconst bufferPosition = this.getAttribLocation(key);\n\t\t\t// 分别绑定数据到shader程序中\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData);\n\t\t\tthis.gl.vertexAttribPointer(bufferPosition, this.buffersSize[key], this.gl.FLOAT, normalize, 0, offset);\n\n\t\t\t// todo:webgl2.0 实例数组能减少同样形状但渲染不同的高性能方案\n\t\t\tthis.gl.enableVertexAttribArray(bufferPosition);\n\t\t}\n\n\t\t// 使用顶点数据\n\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indicesPointer);\n\n\t\t// 加载shader程序\n\t\tthis.gl.useProgram(this.shaderProgram);\n\n\t\tthis.setUniformData();\n\n\t\t// 渲染\n\t\tif (this.indices.length) {this.gl.drawElements(this.gl[this.drawType], this.indices.length, this.gl.UNSIGNED_SHORT, this.offset);}\n\t}\n}\nexport default WidthLine;\n","export default {\n\t// shader中进行坐标转换会不会快？CPU只会调用一次，GPU每帧都要重复去运算，2d情况下没有相机，\n\t// 没有坐标因相机而变化的情况，所以不用再shader中运算，可以减少cpu的调用率\n\t// 发现还是会大规模常常对坐标进行替换，那还是放进shader中运算吧\n\tvertexShader: `\n\tprecision highp float;\n\tattribute vec2 position;\n\tattribute vec4 color;\n    uniform mat3 transform;\n    uniform mat3 modelView;\n\tuniform float z;\n\tvarying vec4 vColor;\n\tvoid main()\n\t{\n\t\tvColor = color;\n\t\tvec3 mPosition = transform * modelView * vec3(position,1.);\n\t\tgl_Position = vec4(mPosition.xy,z,1.);\n\t}\n\t`,\n\n\tfragmentShader: `\n\tprecision highp float;\n\tvarying vec4 vColor;\n\tvoid main()\n\t{\n\t\tgl_FragColor = vColor;\n\t}\n\t`\n};\n","export default {\n    vertexShader: `\n\tprecision highp float;\n\tattribute vec2 position;\n\tattribute vec4 color;\n\tvarying vec4 vColor;\n    uniform mat3 transform;\n    uniform mat3 modelView;\n\tuniform float z;\n\tvoid main()\n\t{\n\t\tvColor = color;\n\t\tvec3 mPosition = transform * modelView * vec3(position,1.);\n\t\tgl_Position = vec4(mPosition.xy,z,1.0);\n\t\t\n\t}\n\t`,\n    fragmentShader: `\n\tprecision highp float;\n\tvarying vec4 vColor;\n\tvoid main()\n\t{\n\t\tgl_FragColor = vColor;\n\t}\n\t`\n};\n","export default {\n\tvertexShader: (config:{sizeAttenuation?:boolean}) => {\n\t\treturn `\n\t\tprecision mediump float;\n\t\tattribute vec2 position;\n\t\tattribute vec4 color;\n\t\tattribute float size;\n\t\tattribute float initTime;\n\t\tuniform float z;\n\t\tuniform mat3 transform;\n\t\tvarying vec4 vColor;\n\t\tuniform float t;\n\t\tuniform float scale;\n        uniform float pixelRatio;\n\t\tvarying float vTime;\n\t\t\n\t\tvoid main()\n\t\t{\n\t\t\tvColor = color;\n\t\t\tgl_PointSize = size * pixelRatio ${config.sizeAttenuation ? '* scale' : ''};\n\t\t\tvec3 mPosition = transform * vec3(position,1.);\n\t\t\tgl_Position = vec4(mPosition.xy,z,1.);\n\t\t\tvTime = initTime;\n\t\t}\n\t\t`;\n\t},\n\n\tfragmentShader: ({ isRound=true, map, isGradual}:{isRound?, map?, isGradual?}) => {\n\treturn `\n\t\tprecision mediump float;\n\t\tuniform float t;\n\t\tuniform float antialias;\n\t\tuniform sampler2D map;\n\t\tvarying float vTime;\n\t\tvarying vec4 vColor;\n\t\tvoid main()\n\t\t{\n\t\t\tfloat distance = distance(gl_PointCoord, vec2(0.5, 0.5));\n\t\t${isRound ? `\n\t\t\tif (distance <= 0.5){` : ''}\n\t\t\t${map ? `\n\t\t\t\tvec4 texelColor = texture2D( map, gl_PointCoord ); \n\t\t\t\tgl_FragColor = texelColor;\n\t\t\t\t${isGradual ? `\n\t\t\t\tgl_FragColor.w *= sin(t+vTime)*0.75/2. + 1.-0.75/2.` : ''};\n\t\t\t\tif(texelColor.w<=0.01){\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t` : `\n\t\t\t\tgl_FragColor = vColor;\n\t\t\t\t${isGradual ? `\n\t\t\t\tgl_FragColor.w = 1. - distance*2.;\n\t\t\t\tgl_FragColor.w *= sin(t+vTime)*0.75/2. + 1.-0.75/2. ;` : ''}\n\t\t\t`}\n\t\t${isRound ? `\n\t\t\t\tfloat smoothSideRatio = smoothstep(0.,antialias,(0.5-distance));\n\t\t\t\tgl_FragColor.w *= smoothSideRatio;\n\t\t\t}else{\n\t\t\t\tdiscard;\n\t\t\t}\n\t\t` : ''}\n\t\t}\n\t\t`;\n}\n};\n","export default {\n\t// 先求连接线然后再求垂线\n\t// 求出等比放大的值\n\tvertexShader: `\n\tprecision lowp float;\n\tattribute vec2 now;\n\tattribute vec2 pre;\n\tattribute vec2 next;\n\tattribute float side;\n\tuniform float width;\n\tuniform float aspect;\n\tuniform mat3 transform;\n\tuniform float offset;\n\tvarying float vSide;\n\tvoid main()\n\t{\n\t\tvSide = side;\n\n\t\t// 先转换坐标系\n\t\tvec2 mNow = (transform*vec3(now,1.)).xy;\n\t\tvec2 mNext = (transform*vec3(next,1.)).xy;\n\t\tvec2 mPre = (transform*vec3(pre,1.)).xy;\n\t\tvec2 _now = vec2(mNow);\n\t\tvec2 _next = vec2(mNext);\n\t\tvec2 _pre =  vec2(mPre);\n\t\n\t\t// 先把本坐标系的坐标放大，和真实的外界坐标一样,这样求出来的相对向量是准确的，如果在后面之间对normal进行变化，就会得出错误的结果\n\t\t_now.x *= aspect;\n\t\t_next.x *= aspect;\n\t\t_pre.x *= aspect;\n\t\t\n\t\tvec2 point0_1 = normalize(_now - _pre);\n\t\tvec2 point2_1 = normalize(_next - _now);\n\t\tvec2 point2_1_0v = normalize(point2_1 + point0_1);\n\t\t\n\t\tvec2 normal = vec2( -point2_1_0v.y , point2_1_0v.x );\n\t\tvec2 offsets = offset*normal;\n\n\t\t//这个算法下先放大,求出的Normal比例在放大的坐标系下是对的，根据这个normal求出放大的比例\n\t\tfloat ratio = sqrt(1.0 - pow(dot(normal,point0_1),2.0));\n\t\tvec2 dir = normal * width/ratio * .5 * side + offsets;\n\n\t\t// 得出的x坐标会被放大，这里要除掉,记得要用转换后坐标进行加减\n\t\tgl_Position = vec4(mNow.x + dir.x/aspect,mNow.y+dir.y , 1., 1.);\n\t}\n\t`,\n\n\tfragmentShader: `\n\tprecision lowp float;\n\tuniform vec4 color;\n\tvarying float vSide;\n\tvoid main()\n\t{\n\t\tfloat smoothSideRatio = max(0.1,smoothstep(0.,0.4,(1. - abs(vSide))));\n\t\tgl_FragColor = color;\n\t\tgl_FragColor.w = smoothSideRatio;\n\t}\n\t`\n}","import { mat3 } from 'gl-matrix';\nimport MiniGL, { MiniGLConfig } from '..';\nclass Controller {\n    miniGL: MiniGL\n    viewport: import(\"/Users/mizy/projects/MiniGL/src/View/Viewport\").default;\n    gl: WebGL2RenderingContext;\n    status: string;\n    config: MiniGLConfig;\n    matrix: mat3;\n    startXY: { x: number; y: number; startX: number; startY: number; };\n    constructor(config:MiniGLConfig) {\n        this.miniGL = config.miniGL;\n        this.viewport = this.miniGL.viewport;\n        this.gl = this.miniGL.gl;\n        this.status = 'enable';\n        this.config = Object.assign({\n            // 默认参数\n        }, config.config);\n        if (!config.disableController) {\n            this.addEvents();\n        }\n        this.matrix = mat3.create();\n    }\n\n    disable() {\n        this.status = 'disable'\n    }\n\n    enable() {\n        this.status = 'enable';\n    }\n\n    addEvents() {\n        const { container } = this.miniGL;\n        container.addEventListener('mousedown', (e) => {\n            if (e.ctrlKey) { e.preventDefault(); return; }\n            this.startXY = {\n                x: e.offsetX,\n                y: e.offsetY,\n                startX: this.viewport.translate[0],\n                startY: this.viewport.translate[1]\n            };\n            this.addMoveEvents();\n        });\n        container.addEventListener('wheel', (e) => {\n            e.preventDefault();\n            this.zoom(e.deltaY > 0 ? 0.99 : 1.01, e.pageX, e.pageY);\n        });\n    }\n\n    addMoveEvents() {\n        const { container } = this.miniGL;\n        container.addEventListener('mousemove', this.onMouseMove);\n        container.addEventListener('mouseup', this.onMouseUp);\n    }\n\n    onMouseMove = (e:MouseEvent) => {\n        if (this.status === 'disable') return;\n        const x = e.offsetX - this.startXY.x + this.startXY.startX;\n        const y = e.offsetY - this.startXY.y + this.startXY.startY;\n        this.moveTo(x, y);\n    }\n\n    onMouseUp = () => {\n        const { container } = this.miniGL;\n        container.removeEventListener('mousemove', this.onMouseMove);\n        container.removeEventListener('mouseup', this.onMouseUp);\n    }\n  \n    /**\n     * 放大到制定的倍率\n     * @param scale \n     * @param cx \n     * @param cy \n     */\n    zoomTo(scale:number, cx:number, cy:number) {\n\n        let changeScale = scale / this.viewport.scale;\n        this.zoom(changeScale, cx, cy);\n    }\n\n    /**\n     * 当前基础的放大倍率\n     * @param  {number} scale\n     * @param  {number} cx\n     * @param  {number} cy\n     */\n    zoom(scale:number, cx:number, cy:number) {\n        // 求世界坐标\n        const canvasPos = this.viewport.convertScreenToWorld(cx, cy);\n        const nextScale = scale * this.viewport.scale;\n        // 求出变换后的偏移坐标\n        const x = cx - canvasPos.x * nextScale;\n        const y = cy - canvasPos.y * nextScale;\n        this.transform(nextScale, x, y);\n    }\n\n    /**\n     * 这个x,y是当前屏幕的x,y,变换后的\n     * @param  {number} x\n     * @param  {number} y\n     */\n    moveTo(x:number, y:number) {\n        const { scale } = this.viewport;\n        this.transform(scale, x, y);\n    }\n\n    /**\n     * 移动到指定的坐标\n     * @param x \n     * @param y \n     */\n    move(x:number, y:number) {\n        const { scale } = this.viewport;\n        x = x + this.viewport.translate[0];\n        y = y + this.viewport.translate[1];\n        this.transform(scale, x, y);\n    }\n\n    /**\n     *  转换到指定情形，先放大后平移，然后注入到viewport.transform\n     * @param scale \n     * @param x \n     * @param y \n     */\n    transform(scale, x, y) {\n        this.viewport.translate = [x, y];\n        this.viewport.scale = scale;\n        this.matrix = mat3.create();\n        mat3.translate(this.matrix, this.matrix, new Float32Array(this.viewport.translate));\n        mat3.scale(this.matrix, this.matrix, [scale, scale]);\n        mat3.mul(this.viewport.transform, this.viewport.matrix, this.matrix);\n    }\n\n    /**\n     * @param  {number} rad\n     * @param  {number} cx=this.viewport.width/2\n     * @param  {number} cy=this.viewport.height/2\n     */\n    rotateTo(rad:number, cx = this.viewport.width / 2, cy = this.viewport.height / 2) {\n        let changeRad = rad - this.viewport.rotation || 0;\n        this.rotate(changeRad, cx, cy);\n    }\n\n    /**\n     * \n     * @param rad \n     * @param cx\n     * @param cy \n     */\n    rotate(rad:number, cx = this.viewport.width / 2, cy = this.viewport.height / 2) {\n        const { transform } = this.viewport;\n        this.viewport.rotation += rad;\n        mat3.translate(transform, transform, [cx, cy]);// 再平移回去\n        mat3.rotate(transform, transform, rad);// 再平移回去\n        mat3.translate(transform, transform, [-cx, -cy]);// 先平移到原点\n    }\n}\nexport default Controller;\n","import Mesh from \"../Mesh/Mesh\";\nimport Point from \"../Mesh/Point\";\nimport Line from \"../Mesh/Line\";\nimport WidthLine from \"../Mesh/WidthLine\";\nimport { mat3 } from \"gl-matrix\";\nimport MiniGL, { MiniGLConfig } from \"..\";\n/**\n * @class\n */\nclass Canvas {\n    index = 0;\n    meshes: any[] = [];\n    miniGL: MiniGL;\n    gl: WebGL2RenderingContext;\n    mesh: Mesh;\n    point: Point;\n    line: Line;\n    widthLine: WidthLine;\n    beforeTime: number;\n    constructor(config: MiniGLConfig) {\n        this.meshes = [];\n        this.miniGL = config.miniGL;\n        this.gl = this.miniGL.gl;\n        // 基础渲染以下类，其他形状让让用户自己new\n        // 牺牲一些性能，渲染多次drawElements来避免通过退化三角形合并形状，导致的事件处理困难（需要分层处理合并的图层，然后按照像素去检测，比较恶心）\n        this.mesh = new Mesh(config.meshConfig);\n        this.point = new Point(config.pointConfig);\n        this.line = new Line(config.lineConfig);\n        this.widthLine = new WidthLine(config.widthLineConfig);\n        this.add(this.mesh);\n        this.add(this.line);\n        this.add(this.point);\n        this.add(this.widthLine);\n    }\n\n    dispose() {\n        this.meshes.forEach((item) => {\n            this.remove(item);\n            item.destroy && item.destroy();\n        });\n        this.meshes = [];\n    }\n\n    toDataUrl() {\n        return this.gl.canvas.toDataURL();\n    }\n\n    status = \"update\";\n\n    update = () => {\n        const time = new Date().getTime();\n        const delta = time - this.beforeTime;\n        this.beforeTime = time;\n        this.render(delta);\n        if (this.status === \"update\") requestAnimationFrame(this.update);\n    };\n    /**\n     * @param  {} mesh\n     * @param  {} [key]\n     * @returns {String} key\n     */\n    add(mesh) {\n        this.meshes.push(mesh);\n        mesh.onAdd && mesh.onAdd(this.miniGL);\n        mesh.parent = this;\n        return mesh;\n    }\n\n    remove(child) {\n        const index = this.meshes.indexOf(child);\n        this.meshes.splice(index, 1);\n    }\n\n    addChild(...args) {\n        this.add.call(this, ...args);\n    }\n\n    removeChild(...args) {\n        this.remove.call(this, ...args);\n    }\n\n    render(delta: number) {\n        const { gl } = this;\n        this.miniGL.fire(\"beforerender\", delta);\n        // 清空\n        gl.clearDepth(1.0);\n        // gl.enable(gl.DEPTH_TEST);\n        gl.disable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);\n        gl.disable(gl.CULL_FACE);\n\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.meshes.forEach((mesh) => {\n            this.renderMesh(mesh, delta);\n        });\n    }\n\n    /**\n     * @param  {} mesh\n     * @param  {} delta\n     * @param  {} parentMatrix 一级级传下来的矩阵\n     */\n    renderMesh(mesh, delta, parentMatrix?) {\n        const { gl } = this;\n\n        const blendMode = (mesh.texture || {}).premultiplyAlpha\n            ? \"ONE\"\n            : \"SRC_ALPHA\";\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl[blendMode], mesh.blendMode || gl.ONE_MINUS_SRC_ALPHA);\n\n        // 写入深度缓冲\n        if (mesh.visible) {\n            this.makeTransform(mesh, parentMatrix);\n            this.makeNeedUniform(mesh);\n            mesh.render(delta);\n            // 更新子元素\n            if (mesh.children) {\n                mesh.children.forEach((item) => {\n                    this.renderMesh(\n                        item,\n                        delta,\n                        mesh.uniformData.modelView.value\n                    );\n                });\n            }\n        }\n    }\n\n    makeNeedUniform(item) {\n        item.uniformData.aspect = {\n            value: this.miniGL.viewport.ratio,\n            type: \"uniform1f\",\n        };\n        item.uniformData.pixelRatio = {\n            value: this.miniGL.viewport.pixelRatio,\n            type: \"uniform1f\",\n        };\n        item.uniformData.scale = {\n            value: this.miniGL.viewport.scale,\n            type: \"uniform1f\",\n        };\n    }\n\n    makeTransform(item, parentMatrix) {\n        if (parentMatrix) {\n            const modelView = mat3.mul(\n                mat3.create(),\n                parentMatrix,\n                item.matrix\n            );\n            item.uniformData.modelView = {\n                value: modelView,\n                type: \"uniformMatrix3fv\",\n            };\n        } else {\n            item.uniformData.modelView = {\n                value: item.matrix,\n                type: \"uniformMatrix3fv\",\n            };\n        }\n        item.uniformData.transform = {\n            value: this.miniGL.viewport.transform,\n            type: \"uniformMatrix3fv\",\n        };\n    }\n}\nexport default Canvas;\n","import { mat3 } from 'gl-matrix';\nimport MiniGL, { MiniGLConfig } from '..';\n\n/**\n * @class\n */\nclass ViewPort {\n\tminiGL: MiniGL\n\tgl: WebGL2RenderingContext\n\tconfig: MiniGLConfig\n\ttransform: mat3\n\tconvertTransform: mat3\n\tscale = 1\n\ttranslate = [0, 0]\n\trotation = Math.PI * 2  \n\twidth = 100\n\theight = 100\n\tpixelRatio = 1\n\trenderWidth = 200;\n\trenderHeight = 200\n\tratio = 1\n\tmatrix:mat3\n\tconstructor(config:MiniGLConfig) {\n\t\tthis.miniGL = config.miniGL;\n\t\tthis.gl = this.miniGL.gl;\n\t\tthis.config = Object.assign({\n\n\t\t}, config.config);\n\t\tthis.transform = mat3.create();// 2d视图转换矩阵\n\t\tthis.convertTransform = mat3.create();// 空间转换矩阵\n\t}\n\n\tconvertScreenToWorld(x = 0, y = 0) {\n\t\treturn {\n\t\t\tx: (x - this.translate[0]) / this.scale,\n\t\t\ty: (y - this.translate[1]) / this.scale,\n\t\t};\n\t}\n\tconvertWorldToScreen(x = 0, y = 0) {\n\t\treturn {\n\t\t\tx: this.scale * x + this.translate[0],\n\t\t\ty: this.scale * y + this.translate[1],\n\t\t};\n\t}\n\n\t/**\n\t * @param  {} x=0\n\t * @param  {} y=0\n\t */\n\tconvertScreenToClip(x = 0, y = 0) {\n\t\treturn {\n\t\t\tx: x * 2 / this.width - 1,\n\t\t\ty: 1 - y * 2 / this.height\n\t\t};\n\t}\n\n\t/**\n\t * @param  {} x=0\n\t * @param  {} y=0\n\t */\n\tconvertClipToScreen(x = 0, y = 0) {\n\t\treturn {\n\t\t\tx: (x + 1) * this.width / 2,\n\t\t\ty: (1 - y) * this.height / 2\n\t\t};\n\t}\n\n\t/**\n\t * 重新布局\n\t */\n\tresize() {\n\t\tconst ratio = window.devicePixelRatio;\n\t\tthis.pixelRatio = ratio;\n\t\tconst width = (this.config.width || this.miniGL.container.clientWidth);\n\t\tconst height = (this.config.height || this.miniGL.container.clientHeight);\n\t\tconst renderWidth = width * ratio;\n\t\tconst renderHeight = height * ratio;\n\t\tthis.miniGL.canvasDOM.width = renderWidth;\n\t\tthis.miniGL.canvasDOM.height = renderHeight;\n\t\tthis.miniGL.canvasDOM.style.width = width + 'px';\n\t\tthis.miniGL.canvasDOM.style.height = height + 'px';\n\t\tthis.gl.viewport(0, 0, renderWidth, renderHeight);\n\t\tthis.renderWidth = renderWidth;\n\t\tthis.renderHeight = renderHeight;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.ratio = width / height;\n\t\tthis.makeMatrix();\n\t}\n\n\tmakeMatrix() {\n\t\t// 计算好坐标转换矩阵\n\t\tconst transform = mat3.create();\n\t\tmat3.scale(transform, transform, [2 / this.width, -2 / this.height]);\n\t\t// gl-matrix会以初次进行换算的坐标系为基准空间，来进行换算\n\t\t// 也就是说每次进行转换的时候，都是在原矩阵上做计算和转换，而不只是改变矩阵的值\n\t\tmat3.translate(transform, transform, [-this.width / 2, -this.height / 2]);\n\t\tthis.matrix = transform;\n\t\tmat3.copy(this.transform, transform);\n\t}\n}\nexport default ViewPort;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Base from \"./Base\";\nimport Viewport from \"./View/Viewport\";\nimport Canvas from \"./View/Canvas\";\nimport Controller from \"./Utils/Controller\";\nexport interface MiniGLConfig {\n    container: HTMLElement;\n    contextOption: WebGLContextAttributes;\n    miniGL: MiniGL;\n    [key: string]: any;\n}\nclass MiniGL extends Base {\n    autoUpdate = false;\n    container: HTMLElement;\n    config: MiniGLConfig;\n    canvasDOM: HTMLCanvasElement;\n    gl: WebGL2RenderingContext;\n    viewport: Viewport;\n    canvas: Canvas;\n    controller: Controller;\n    /**\n     *\n     * @param {any} config\n     * @param {HTMLDivElement} config.container\n     */\n    constructor(config: MiniGLConfig) {\n        super();\n        this.container = config.container;\n        this.config = Object.assign(\n            {\n                contextOption: {\n                    alpha: true,\n                    antialias: true,\n                    antialiasSamples: 16,\n                    stencil: true,\n                    powerPreference: \"high-performance\",\n                    preserveDrawingBuffer: true,\n                },\n                pointConfig: {},\n            },\n            config\n        );\n    }\n\n    init() {\n        const { contextOption = {} } = this.config;\n        this.canvasDOM = document.createElement(\"canvas\");\n        this.container.appendChild(this.canvasDOM);\n\n        this.gl = this.canvasDOM.getContext(\"webgl2\", contextOption);\n        if (this.gl == null) {\n            return console.error(\n                \"你的浏览器不支持webgl2,请更新使用chrome浏览器\"\n            );\n        }\n\n        this.viewport = new Viewport({ miniGL: this, ...this.config });\n        this.viewport.resize();\n        this.canvas = new Canvas({ miniGL: this, ...this.config });\n        this.controller = new Controller({ miniGL: this, ...this.config });\n\n        this.canvas.update();\n    }\n}\nexport default MiniGL;\n"],"names":[],"sourceRoot":""}