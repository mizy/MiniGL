<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Group/Group.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Group/Group.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Base from '../Mesh/Base';
import {mat3} from 'gl-matrix';
/**
 * 进行批量渲染
 * @class
 */
class Group extends Base {
    depthMask = true;
    depthTest = true;
    transparent = true;
    children=[];
    childId = -1;

    constructor(config) {
        super();
        this.children = [];
        this.init(config);
    }

    dispose() {
        Base.dispose.call(this);
        this.children.forEach((item, index)=>{
            item.destroy &amp;&amp; item.destroy();
        });
    }

    onAdd(miniGL) {
        this.miniGL = miniGL;
        // 获取顶点数据内存里的指针
        this.gl = miniGL.gl;
        this.indicesPointer = this.gl.createBuffer();
        this.children.forEach(each=>{
            if (!each.miniGL) {each.onAdd(miniGL);}
        });
    }

    addChild(child) {
        this.childId++;
        child.childId = this.childId;
        child.parent = this;
        this.children.push(child);
        child.zOrder = this.children.length - 1;
        if (this.miniGL) {
            child.onAdd(this.miniGL);
        }
    }

    addChildAt(child, index) {
        child.childId = this.childId++;
        child.parent = this;
        if (this.miniGL) {
            child.onAdd(this.miniGL);
        }
        this.children.splice(index, 0, child);
        child.zOrder = index + 1;
    }

    removeChild(child) {
        const pos = this.children.indexOf(child);
        if (!pos &lt;= -1) {
            return;
        }
        this.children[pos].parent = undefined;
        this.children.splice(pos, 1) ;
    }

    swapChildren(a, b) {
        this.children.forEach((item, index)=>{
            if (item === a) {
                this.children[index] = b;
                this.children[index].zOrder = index;
            }
            if (item === b) {
                this.children[index] = a;
                this.children[index].zOrder = index;
            }
        });
    }

}
export default Group;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Base.html">Base</a></li><li><a href="Canvas.html">Canvas</a></li><li><a href="Group.html">Group</a></li><li><a href="MiniGL.html">MiniGL</a></li><li><a href="MiniGLArmatureDisplay.html">MiniGLArmatureDisplay</a></li><li><a href="MiniGLSlot.html">MiniGLSlot</a></li><li><a href="MiniTextureData.html">MiniTextureData</a></li><li><a href="Rect.html">Rect</a></li><li><a href="ViewPort.html">ViewPort</a></li></ul><h3>Interfaces</h3><ul><li><a href="ShapeUtil.html">ShapeUtil</a></li></ul><h3>Global</h3><ul><li><a href="global.html#load">load</a></li><li><a href="global.html#loadImage">loadImage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Dec 11 2021 13:13:37 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
