<html>
	<head>
		<title>MiniGL</title>
	</head>
	<body >
		
		<div id="root" style="width: 100%; height: 100%"></div>
		<script src="/index.js"></script>
	</body>
	<script>
		const app = new MiniGL({
			container: document.querySelector("#root"),
		});
        app.init();
        const resource = {image:[]};
        let image1;let image2;
        Promise.all([
            MiniGL.Util.Loader.loadImage('./demo/dragonBones/model/shizuku/shizuku.1024/texture_00.png').then(image=>{
                resource.image[0] = image;
            }),
            MiniGL.Util.Loader.loadImage('./demo/dragonBones/model/shizuku/shizuku.1024/texture_01.png').then(image=>{
                resource.image[1] = image;
            }),
            MiniGL.Util.Loader.loadImage('./demo/dragonBones/model/shizuku/shizuku.1024/texture_02.png').then(image=>{
                resource.image[2] = image;
            }),
            MiniGL.Util.Loader.loadImage('./demo/dragonBones/model/shizuku/shizuku.1024/texture_03.png').then(image=>{
                resource.image[3] = image;
            })]).then(()=>{
                const image = resource.image[0];
                const util = new MiniGL.Texture(app);
                // 资源加载完毕，开始执行
                 image1 = new MiniGL.Image();
                 image2 = new MiniGL.Image();
                 const mesh = new MiniGL.Mesh();
               
                app.canvas.add(image2);
                app.canvas.add(mesh);
                app.canvas.add(image1);


                const texture1 = util.create({image:resource.image[0],reverseY:false});
                const texture2 = util.create({image:resource.image[0],reverseY:false});

                image1.dispose();
                image1.setBufferData(data.shadow.vertices, 'position', 2);
                image1.setBufferData(data.shadow.uvs, 'uv', 2);
                image1.setIndices(data.shadow.triangles);
                image1.setTexture(texture1);
                
               
                setTimeout(()=>{
                    image2.dispose();
                    image2.setBufferData(data.face.vertices, 'position', 2);
                    image2.setBufferData(data.face.uvs, 'uv', 2);
                    image2.setIndices(data.face.triangles);

                    image2.setTexture(texture2);
                },100)

            //     mesh.setData(
            //     [
            //         { position: { x: 0, y: -100 },color:[0,1,.5,1] },
            //         { position: { x: 0, y: 200 } ,color:[0,1,.5,1] },
            //         { position: { x: 500, y: -100 },color:[0,1,.5,1]  },
            //         { position: { x: 500, y: 200 },color:[0,1,.5,1]  },
            //     ],
            //     [0, 1, 2, 2, 1, 3]
            // );
                app.controller.move(200,200)

            });
		         
            var data = {
                'shadow':{
                    "type": "mesh",
                    "name": "D_FACESHADOW.00",
                    "path": "shizuku_00",
                    "vertices": [
                        -44.95,
                        -140.8,
                        38.84,
                        -142.52,
                        113.32,
                        -104.52,
                        152.88,
                        -21.61,
                        158.41,
                        98,
                        138.63,
                        121.75,
                        101.1,
                        70.37,
                        15.56,
                        32.8,
                        -66.77,
                        49.64,
                        -125.25,
                        92.82,
                        -141.54,
                        147.66,
                        -164.81,
                        83.75,
                        -163.65,
                        -26.79,
                        -110.12,
                        -107.98,
                        -129.61,
                        16.39,
                        -93.83,
                        -45.79,
                        -32.15,
                        -42.34,
                        39.42,
                        -55.29,
                        94.7,
                        -16.43,
                        122.63,
                        52.66
                    ],
                    "uvs": [
                        0.165365,
                        0.658854,
                        0.259115,
                        0.657552,
                        0.342448,
                        0.686198,
                        0.386719,
                        0.748698,
                        0.384115,
                        0.84375,
                        0.361979,
                        0.864583,
                        0.322917,
                        0.81901,
                        0.236979,
                        0.791667,
                        0.138021,
                        0.795573,
                        0.083333,
                        0.835938,
                        0.057292,
                        0.876302,
                        0.03125,
                        0.828125,
                        0.032552,
                        0.744792,
                        0.092448,
                        0.683594,
                        0.071615,
                        0.78125,
                        0.110677,
                        0.730469,
                        0.186198,
                        0.72526,
                        0.261719,
                        0.713542,
                        0.321615,
                        0.752604,
                        0.356771,
                        0.800781
                    ],
                    "triangles": [
                        19,
                        3,
                        18,
                        19,
                        18,
                        6,
                        2,
                        17,
                        18,
                        18,
                        17,
                        7,
                        17,
                        16,
                        7,
                        17,
                        0,
                        16,
                        16,
                        15,
                        8,
                        16,
                        13,
                        15,
                        15,
                        14,
                        8,
                        15,
                        12,
                        14,
                        14,
                        11,
                        9,
                        16,
                        0,
                        13,
                        15,
                        13,
                        12,
                        14,
                        12,
                        11,
                        11,
                        10,
                        9,
                        14,
                        9,
                        8,
                        16,
                        8,
                        7,
                        18,
                        7,
                        6,
                        19,
                        6,
                        5,
                        19,
                        5,
                        4,
                        19,
                        4,
                        3,
                        18,
                        3,
                        2,
                        17,
                        2,
                        1,
                        17,
                        1,
                        0
                    ],
                    "userEdges": []
                }
                ,'face':{
                    "type": "mesh",
                    "name": "D_FACE.00",
                    "path": "shizuku_00",
                    "vertices": [
                        -40.57,
                        -131.63,
                        38.06,
                        -133.33,
                        95.94,
                        -106.92,
                        119.27,
                        -63.47,
                        114.09,
                        3.83,
                        93.35,
                        71.57,
                        66.14,
                        108.2,
                        38.06,
                        123.96,
                        6.95,
                        133.33,
                        -36.25,
                        120.55,
                        -97.81,
                        58.15,
                        -115.73,
                        0.43,
                        -116.6,
                        -71.99,
                        -88.09,
                        -116.29,
                        2.63,
                        97.55,
                        44.1,
                        81.36,
                        65.7,
                        41.32,
                        106.18,
                        29.67,
                        77.8,
                        -4.69,
                        -38.84,
                        81.36,
                        -65.62,
                        48.99,
                        -82.9,
                        8.95,
                        -83.77,
                        -42.17,
                        82.12,
                        -44.73,
                        0.9,
                        52.4,
                        -28.47,
                        8.95,
                        25.96,
                        7.24,
                        -1.69,
                        -43.88,
                        44.97,
                        -37.06,
                        -48.34,
                        -38.76,
                        -63.89,
                        -81.36,
                        0.04,
                        -89.88,
                        58.79,
                        -84.77,
                        -69.84,
                        71.91,
                        -60.16,
                        91.53,
                        -15.35,
                        108.19,
                        -17.78,
                        126.02,
                        -37.76,
                        104.23,
                        -47.98,
                        98.2,
                        -25,
                        114.54,
                        -17.27,
                        118.18,
                        -5.08,
                        120.4,
                        40.43,
                        105.49,
                        20.84,
                        90.44,
                        23.08,
                        112.47,
                        5.74,
                        118.58,
                        15.84,
                        121.09,
                        21.71,
                        128.89,
                        -12.96,
                        91.46,
                        -86.33,
                        75.11,
                        -72.53,
                        84.97,
                        -107.07,
                        27.17,
                        -90.43,
                        37.15,
                        -81.71,
                        53.52,
                        -84.72,
                        64.4,
                        67.67,
                        76.96,
                        82.07,
                        87.76,
                        53.73,
                        94.11,
                        86.43,
                        36.01,
                        100.48,
                        45.64,
                        79.79,
                        55.72,
                        82.88,
                        74.02,
                        67.46,
                        90.45,
                        90.14,
                        52.37,
                        51.45,
                        115.71,
                        -101.99,
                        41.77,
                        -93.12,
                        47.87,
                        -89.52,
                        55.54,
                        -81.1,
                        74.48,
                        -68.67,
                        94.06,
                        -57.3,
                        100.61,
                        -45.4,
                        106.64,
                        -63.17,
                        96.92,
                        -51.45,
                        104.23,
                        -37.09,
                        111.48,
                        53.71,
                        106.89,
                        39.27,
                        114.55,
                        29.54,
                        117.43,
                        45.74,
                        110.42,
                        59.67,
                        100.85,
                        75.73,
                        83,
                        87.79,
                        65.06,
                        -73.55,
                        90.11
                    ],
                    "uvs": [
                        0.135417,
                        0.238281,
                        0.253906,
                        0.235677,
                        0.341146,
                        0.276042,
                        0.376302,
                        0.342448,
                        0.36849,
                        0.445313,
                        0.338542,
                        0.549479,
                        0.295573,
                        0.602865,
                        0.253906,
                        0.628906,
                        0.207031,
                        0.643229,
                        0.141927,
                        0.623698,
                        0.052083,
                        0.527344,
                        0.022135,
                        0.440104,
                        0.020833,
                        0.329427,
                        0.063802,
                        0.261719,
                        0.200521,
                        0.588542,
                        0.263021,
                        0.563802,
                        0.295573,
                        0.502604,
                        0.356578,
                        0.486745,
                        0.313802,
                        0.432292,
                        0.138021,
                        0.563802,
                        0.097656,
                        0.514323,
                        0.071615,
                        0.453125,
                        0.070313,
                        0.375,
                        0.320313,
                        0.371094,
                        0.197917,
                        0.519531,
                        0.153646,
                        0.453125,
                        0.235677,
                        0.450521,
                        0.19401,
                        0.372396,
                        0.264323,
                        0.382813,
                        0.123698,
                        0.380208,
                        0.10026,
                        0.315104,
                        0.196615,
                        0.302083,
                        0.285156,
                        0.309896,
                        0.090644,
                        0.550661,
                        0.106547,
                        0.57804,
                        0.173426,
                        0.604799,
                        0.169761,
                        0.632048,
                        0.1403,
                        0.598753,
                        0.124248,
                        0.588236,
                        0.158873,
                        0.61353,
                        0.171504,
                        0.619091,
                        0.18889,
                        0.622483,
                        0.258131,
                        0.598729,
                        0.22796,
                        0.57768,
                        0.229386,
                        0.610366,
                        0.204231,
                        0.619707,
                        0.220427,
                        0.623537,
                        0.229278,
                        0.636432,
                        0.177022,
                        0.57924,
                        0.069032,
                        0.560536,
                        0.086916,
                        0.569976,
                        0.036166,
                        0.480977,
                        0.060272,
                        0.496227,
                        0.073408,
                        0.521251,
                        0.070521,
                        0.538493,
                        0.298538,
                        0.557066,
                        0.318616,
                        0.574235,
                        0.278176,
                        0.581989,
                        0.326808,
                        0.494484,
                        0.349933,
                        0.509859,
                        0.314855,
                        0.523639,
                        0.32048,
                        0.552905,
                        0.297245,
                        0.577046,
                        0.332075,
                        0.51917,
                        0.274096,
                        0.616288,
                        0.043826,
                        0.503291,
                        0.056218,
                        0.511633,
                        0.062617,
                        0.524334,
                        0.077588,
                        0.556626,
                        0.092958,
                        0.584188,
                        0.110198,
                        0.592566,
                        0.128193,
                        0.602431,
                        0.101325,
                        0.587724,
                        0.11866,
                        0.598149,
                        0.141023,
                        0.609837,
                        0.277475,
                        0.600866,
                        0.25606,
                        0.613524,
                        0.239964,
                        0.618364,
                        0.265827,
                        0.607194,
                        0.286501,
                        0.591978,
                        0.309765,
                        0.566666,
                        0.32882,
                        0.538873,
                        0.085223,
                        0.578752
                    ],
                    "triangles": [
                        77,
                        76,
                        44,
                        78,
                        76,
                        64,
                        78,
                        42,
                        76,
                        77,
                        7,
                        76,
                        78,
                        64,
                        75,
                        79,
                        57,
                        75,
                        78,
                        75,
                        42,
                        79,
                        75,
                        6,
                        74,
                        71,
                        9,
                        73,
                        71,
                        38,
                        74,
                        37,
                        71,
                        73,
                        38,
                        70,
                        72,
                        70,
                        34,
                        82,
                        69,
                        50,
                        72,
                        34,
                        69,
                        67,
                        53,
                        66,
                        67,
                        66,
                        10,
                        66,
                        52,
                        65,
                        66,
                        65,
                        10,
                        76,
                        7,
                        64,
                        75,
                        64,
                        6,
                        81,
                        63,
                        60,
                        81,
                        5,
                        63,
                        80,
                        62,
                        56,
                        79,
                        62,
                        57,
                        80,
                        55,
                        62,
                        79,
                        6,
                        62,
                        80,
                        56,
                        61,
                        81,
                        60,
                        61,
                        80,
                        61,
                        55,
                        81,
                        61,
                        5,
                        61,
                        60,
                        55,
                        63,
                        58,
                        60,
                        63,
                        59,
                        58,
                        63,
                        5,
                        59,
                        59,
                        17,
                        58,
                        60,
                        58,
                        16,
                        62,
                        55,
                        57,
                        75,
                        57,
                        42,
                        62,
                        6,
                        56,
                        61,
                        56,
                        5,
                        60,
                        16,
                        55,
                        57,
                        55,
                        15,
                        68,
                        54,
                        49,
                        67,
                        54,
                        53,
                        68,
                        33,
                        54,
                        67,
                        10,
                        54,
                        54,
                        33,
                        53,
                        66,
                        53,
                        52,
                        53,
                        20,
                        52,
                        65,
                        52,
                        51,
                        52,
                        21,
                        51,
                        69,
                        34,
                        50,
                        68,
                        49,
                        50,
                        82,
                        50,
                        49,
                        68,
                        50,
                        33,
                        54,
                        10,
                        49,
                        77,
                        46,
                        7,
                        47,
                        7,
                        46,
                        47,
                        46,
                        8,
                        77,
                        44,
                        46,
                        46,
                        44,
                        45,
                        46,
                        45,
                        8,
                        76,
                        42,
                        44,
                        45,
                        44,
                        14,
                        44,
                        42,
                        43,
                        44,
                        43,
                        14,
                        57,
                        15,
                        42,
                        43,
                        42,
                        15,
                        45,
                        14,
                        41,
                        45,
                        41,
                        8,
                        41,
                        40,
                        36,
                        41,
                        35,
                        40,
                        40,
                        39,
                        36,
                        74,
                        39,
                        37,
                        40,
                        35,
                        39,
                        74,
                        9,
                        39,
                        70,
                        38,
                        34,
                        71,
                        37,
                        38,
                        39,
                        35,
                        37,
                        38,
                        37,
                        19,
                        39,
                        9,
                        36,
                        41,
                        36,
                        8,
                        48,
                        19,
                        35,
                        37,
                        35,
                        19,
                        41,
                        14,
                        35,
                        48,
                        35,
                        14,
                        50,
                        34,
                        33,
                        38,
                        19,
                        34,
                        34,
                        19,
                        33,
                        53,
                        33,
                        20,
                        32,
                        31,
                        28,
                        32,
                        1,
                        31,
                        31,
                        30,
                        27,
                        31,
                        0,
                        30,
                        30,
                        22,
                        29,
                        30,
                        29,
                        27,
                        32,
                        28,
                        23,
                        31,
                        27,
                        28,
                        28,
                        27,
                        26,
                        29,
                        25,
                        27,
                        27,
                        25,
                        26,
                        28,
                        26,
                        18,
                        29,
                        21,
                        25,
                        26,
                        25,
                        24,
                        25,
                        20,
                        24,
                        26,
                        24,
                        16,
                        48,
                        24,
                        19,
                        43,
                        15,
                        24,
                        48,
                        14,
                        24,
                        43,
                        24,
                        14,
                        32,
                        23,
                        3,
                        28,
                        18,
                        23,
                        30,
                        12,
                        22,
                        29,
                        22,
                        21,
                        51,
                        21,
                        11,
                        22,
                        11,
                        21,
                        52,
                        20,
                        21,
                        25,
                        21,
                        20,
                        33,
                        19,
                        20,
                        24,
                        20,
                        19,
                        58,
                        18,
                        16,
                        26,
                        16,
                        18,
                        23,
                        18,
                        4,
                        58,
                        17,
                        18,
                        18,
                        17,
                        4,
                        24,
                        15,
                        16,
                        55,
                        16,
                        15,
                        30,
                        0,
                        13,
                        30,
                        13,
                        12,
                        22,
                        12,
                        11,
                        23,
                        4,
                        3,
                        32,
                        3,
                        2,
                        32,
                        2,
                        1,
                        31,
                        1,
                        0
                    ],
                    "userEdges": []
                }
            }        
                        
	</script>
</html>
